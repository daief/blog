<template>
  <article>
    <header>
      <h1 class="text-foreground text-3xl font-bold mb-4">
        <%- article.frontmatter.title %>
      </h1>

      <PostMetaInfo :meta="meta" />
    </header>
    <Markdown class="mt-6">
      <%- article.excerpt %>
      <a href="#more" class="hidden"></a>
      <%- article.more %>
    </Markdown>

    <hr class="border-border mt-10" />

    <div class="mt-10" v-if="meta.comments">
      <Comment />
    </div>
  </article>
</template>

<script setup lang="ts">
  import Markdown from '@app/components/markdown.vue';
  import PostMetaInfo from '@app/components/post/meta-info.vue';
  import ALink from '@app/components/a-link.vue';
  import { usePageTitle } from '@app/composables/use-page-title';
  import Comment from '@app/components/comment.vue';

  defineOptions({
    name: 'Article',
  });

  usePageTitle({
    title: `<%- article.frontmatter.title %>`,
    description: `<%- article.frontmatter.description || '' %>`,
  });

  const meta = JSON.parse('<%- JSON.stringify({ ...article.frontmatter }) %>');
</script>
