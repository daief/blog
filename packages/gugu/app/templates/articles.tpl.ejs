<template>
  <div class="space-y-12">
    <% articles.forEach(article => { %>
    <article>
      <router-link
        :to="'/post/<%- article.frontmatter.id %>#more'"
        class="text-xl font-bold text-accent transition-colors"
      >
        <%- article.frontmatter.title %>
      </router-link>

      <PostMetaInfo
        class="my-2"
        :meta="metaMap['<%- article.frontmatter.id %>']"
      />

      <Markdown> <%- article.excerpt %> </Markdown>
    </article>
    <% }) %>
  </div>
</template>

<script setup lang="ts">
  import Markdown from '@app/components/markdown.vue';
  import PostMetaInfo from '@app/components/post/meta-info.vue';

  defineOptions({
    name: 'Articles',
  });

  const metaMap = JSON.parse(
    '<%- JSON.stringify(Object.fromEntries(articles.map((article) => [article.frontmatter.id, { ...article.frontmatter, isDraft: article.isDraft }]))) %>',
  );
</script>
